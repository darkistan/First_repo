import random

def matrix_game():
    print("üîµüü¢üî¥ –í—ñ—Ç–∞—é, –û–±—Ä–∞–Ω–∏–π. –¢–∏ –æ–ø–∏–Ω–∏—à—Å—è –≤ —Ü–∏—Ñ—Ä–æ–≤–æ–º—É –ª–∞–±—ñ—Ä–∏–Ω—Ç—ñ –ú–∞—Ç—Ä–∏—Ü—ñ...")
    print("–©–æ–± –≤—ñ–π—Ç–∏, –ø—Ä–æ–π–¥–∏ —Ç—Ä–∏ –≤–∏–ø—Ä–æ–±—É–≤–∞–Ω–Ω—è. –¢–≤–æ—î –∑–¥–æ—Ä–æ–≤'—è: 3 ‚ù§Ô∏è")
    
    health = 3
    score = 0

    # --- –†—ñ–≤–µ–Ω—å 1: –í–∏–±—ñ—Ä –ø—ñ–≥—É–ª–∫–∏ ---
    print("\nüîë –†—ñ–≤–µ–Ω—å 1: –í–∏–±—ñ—Ä –ø—ñ–≥—É–ª–∫–∏")
    pills = ["—á–µ—Ä–≤–æ–Ω–∞", "—Å–∏–Ω—è", "–∑–µ–ª–µ–Ω–∞"]
    correct_pill = random.choice(pills)

    while True:
        choice = input("–û–±–µ—Ä–∏ –ø—ñ–≥—É–ª–∫—É (—á–µ—Ä–≤–æ–Ω–∞/—Å–∏–Ω—è/–∑–µ–ª–µ–Ω–∞): ").strip().lower()
        if choice == correct_pill:
            print("‚úÖ –¢–∏ –∑—Ä–æ–±–∏–≤ –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –≤–∏–±—ñ—Ä! –ü–µ—Ä–µ—Ö–æ–¥–∏–º–æ –¥–∞–ª—ñ...")
            score += 1
            break
        elif choice not in pills:
            print("‚ö†Ô∏è –ù–µ–≤—ñ–¥–æ–º–∞ –ø—ñ–≥—É–ª–∫–∞. –û–±–µ—Ä–∏ –æ–¥–Ω—É –∑: —á–µ—Ä–≤–æ–Ω–∞, —Å–∏–Ω—è, –∑–µ–ª–µ–Ω–∞.")
        else:
            print("‚ùå –ü–∞—Å—Ç–∫–∞! –°–ø—Ä–æ–±—É–π —â–µ —Ä–∞–∑.")

    # --- –†—ñ–≤–µ–Ω—å 2: –ú–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∞ –∑–∞–≥–∞–¥–∫–∞ ---
    print("\nüß† –†—ñ–≤–µ–Ω—å 2: –ú–∞—Ç–µ–º–∞—Ç–∏—á–Ω–∞ –∑–∞–≥–∞–¥–∫–∞")
    math_question = "12 + 7 * 2"
    correct_answer = eval(math_question)

    while True:
        try:
            user_answer = int(input(f"–û–±—á–∏—Å–ª–∏: {math_question} = "))
            if user_answer == correct_answer:
                print("‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å!")
                score += 1
                break
            else:
                health -= 1
                print(f"‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ê–≥–µ–Ω—Ç –°–º—ñ—Ç –∞—Ç–∞–∫—É—î! –ó–¥–æ—Ä–æ–≤'—è: {health} ‚ù§Ô∏è")
                if health == 0:
                    print("üíÄ –¢–µ–±–µ —Å–ø—ñ–π–º–∞–ª–∏ –∞–≥–µ–Ω—Ç–∏. –ö—ñ–Ω–µ—Ü—å –≥—Ä–∏.")
                    return
        except ValueError:
            print("–í–≤–µ–¥–∏ —Ü—ñ–ª–µ —á–∏—Å–ª–æ.")

    # --- –†—ñ–≤–µ–Ω—å 3: –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–π –∫–æ–¥ ---
    print("\nüîê –†—ñ–≤–µ–Ω—å 3: –®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–π –∫–æ–¥")
    
    decoded = "".join(chr(ord(c) - 1) for c in encoded)

    while True:
        user_input = input("–í–≤–µ–¥–∏ —Ä–æ–∑—à–∏—Ñ—Ä–æ–≤–∞–Ω–µ —Å–ª–æ–≤–æ: ").strip().lower()
        if user_input == decoded:
            print("‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ! –¢–∏ –∑–Ω–∞–π—à–æ–≤ –≤—Ö—ñ–¥.")
            score += 1
            break
        else:
            health -= 1
            print(f"‚ùå –ù–µ–≤—ñ—Ä–Ω–æ. –ó–¥–æ—Ä–æ–≤'—è: {health} ‚ù§Ô∏è")
            if health == 0:
                print("üíÄ –ó–∞—à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–π –∫–æ–¥ –≤–∏—è–≤–∏–≤—Å—è —Ñ–∞—Ç–∞–ª—å–Ω–∏–º. –ö—ñ–Ω–µ—Ü—å –≥—Ä–∏.")
                return

    # --- –§—ñ–Ω–∞–ª ---
    print("\nüéâ –§—ñ–Ω–∞–ª")
    if score == 3:
        print("üöÄ –¢–∏ –ø–æ—Ç—Ä–∞–ø–∏–≤ —É –º–∞—Ç—Ä–∏—Ü—é! –í—ñ—Ç–∞—é, –ù–ï–û.")
    elif score == 2:
        print("üòÆ –¢–∏ –¥—ñ–π—à–æ–≤ –¥–æ –∫—ñ–Ω—Ü—è, –∞–ª–µ –∑ –≤—Ç—Ä–∞—Ç–∞–º–∏...")
    else:
        print("ü§ï –¢–∏ –≤–∏–∂–∏–≤, –∞–ª–µ –ª–µ–¥–≤–µ. –ú–∞—Ç—Ä–∏—Ü—è —â–µ –ø–æ–ø–µ—Ä–µ–¥—É.")

    print(f"‚úÖ –í–¥–∞–ª–∏—Ö —Ä—ñ—à–µ–Ω—å: {score} / 3")

# –ó–∞–ø—É—Å–∫ –≥—Ä–∏
if __name__ == "__main__":
    matrix_game()
